<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ArduParts: /home/user/Programmation/arduino/sourceforge/arduParts/arduParts-git/PCA9685/PCA9685.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_89b6cb6a960da8a52de5fad7c0515f07.html">arduParts-git</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_cc85d4adb3b5debac5d8b559f1b333d0.html">PCA9685</a>
  </div>
</div>
<div class="contents">
<h1>PCA9685.cpp</h1><a href="PCA9685_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="PCA9685_8h.html" title="Header file for PCA9685 class.">PCA9685.h</a>&quot;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;Wire.h&gt;</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#if 0</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#   define DBG( msg ) Serial.println( String( &quot;[debug] PCA9685:  &quot; ) + __FUNCTION__ + &quot; @line &quot; + String( __LINE__ ) + &quot;:  &quot; + msg )</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#   define WARN( msg ) Serial.println( String( &quot;[warning] PCA9685:  &quot; ) + __FUNCTION__ + &quot; @line &quot; + String( __LINE__ ) + &quot;:  &quot; + msg )</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00038"></a><a class="code" href="PCA9685_8cpp.html#a6a51d7a3b4a536c743409e954040830f">00038</a> <span class="preprocessor"></span><span class="preprocessor">#   define DBG( msg )</span>
<a name="l00039"></a><a class="code" href="PCA9685_8cpp.html#a108d6c5c51dd46e82a62b262394f0242">00039</a> <span class="preprocessor"></span><span class="preprocessor">#   define WARN( msg )</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="PCA9685_8cpp.html#a3ea3a68d4edb8c0403f22da828d9129f">00043</a> <span class="preprocessor">#define CMD_SOFTWARE_RESET  (0x06)  s</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">/* ######################################################################### */</span>
<a name="l00047"></a>00047 <span class="comment">/* ######  REGISTER ADDRESSES ############################################## */</span>
<a name="l00048"></a>00048 <span class="comment">/* ######################################################################### */</span>
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c">00050</a> <span class="preprocessor">#define REG_MODE1           (0x00)  </span>
<a name="l00051"></a><a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3">00051</a> <span class="preprocessor">#define REG_MODE2           (0x01)  </span>
<a name="l00052"></a><a class="code" href="PCA9685_8cpp.html#a1ad093121f021c343a6a8c3244d172f2">00052</a> <span class="preprocessor">#define REG_SUBADR1         (0x02)  </span>
<a name="l00053"></a><a class="code" href="PCA9685_8cpp.html#ab77f4f178026b0e0280871f7d4d55ca5">00053</a> <span class="preprocessor">#define REG_SUBADR2         (0x03)  </span>
<a name="l00054"></a><a class="code" href="PCA9685_8cpp.html#a72d6411bc239f9395ffc28701cf21852">00054</a> <span class="preprocessor">#define REG_SUBADR3         (0x04)  </span>
<a name="l00055"></a><a class="code" href="PCA9685_8cpp.html#a5be693718bc7359ecbe58b6dcf947e49">00055</a> <span class="preprocessor">#define REG_ALLCALLADR      (0x05)  </span>
<a name="l00057"></a><a class="code" href="PCA9685_8cpp.html#a44757078205b23b1e1e47d0abe7c99e6">00057</a> <span class="preprocessor">#define REG_LED0_ON_L       (0x06)  </span>
<a name="l00058"></a><a class="code" href="PCA9685_8cpp.html#a0250a1a53eacd968363471ebf32ee140">00058</a> <span class="preprocessor">#define REG_LED0_ON_H       (0x07)  </span>
<a name="l00059"></a><a class="code" href="PCA9685_8cpp.html#a558bff9a21163e799d439f213563cd59">00059</a> <span class="preprocessor">#define REG_LED0_OFF_L      (0x08)  </span>
<a name="l00060"></a><a class="code" href="PCA9685_8cpp.html#a41899db3c5a9355cd6d61035122fec7d">00060</a> <span class="preprocessor">#define REG_LED0_OFF_H      (0x09)  </span>
<a name="l00062"></a><a class="code" href="PCA9685_8cpp.html#aeb0be50350cc93c1aa604c60367b856e">00062</a> <span class="preprocessor">#define REG_LED1_ON_L       (0x0A)  </span>
<a name="l00063"></a><a class="code" href="PCA9685_8cpp.html#a63860bb31c58a2febcaf4f866a3695fd">00063</a> <span class="preprocessor">#define REG_LED1_ON_H       (0x0B)  </span>
<a name="l00064"></a><a class="code" href="PCA9685_8cpp.html#aed9b45774f97b1830c39504fe3dd8646">00064</a> <span class="preprocessor">#define REG_LED1_OFF_L      (0x0C)  </span>
<a name="l00065"></a><a class="code" href="PCA9685_8cpp.html#a01ce17380811f6f25d671deac9527429">00065</a> <span class="preprocessor">#define REG_LED1_OFF_H      (0x0D)  </span>
<a name="l00067"></a><a class="code" href="PCA9685_8cpp.html#acca098d51442e8684e1dcd0b6586e26c">00067</a> <span class="preprocessor">#define REG_LED2_ON_L       (0x0E)  </span>
<a name="l00068"></a><a class="code" href="PCA9685_8cpp.html#ada27fb85da1bcff9605aaf3b57e32825">00068</a> <span class="preprocessor">#define REG_LED2_ON_H       (0x0F)  </span>
<a name="l00069"></a><a class="code" href="PCA9685_8cpp.html#aa6e24b59bb00bf62d561c8b6bd8efee3">00069</a> <span class="preprocessor">#define REG_LED2_OFF_L      (0x10)  </span>
<a name="l00070"></a><a class="code" href="PCA9685_8cpp.html#a5e6d279915e397533bd1aa071654d85e">00070</a> <span class="preprocessor">#define REG_LED2_OFF_H      (0x11)  </span>
<a name="l00072"></a><a class="code" href="PCA9685_8cpp.html#a06e4f8288fe91067f19bba3700530ff7">00072</a> <span class="preprocessor">#define REG_LED3_ON_L       (0x12)  </span>
<a name="l00073"></a><a class="code" href="PCA9685_8cpp.html#afe21a407c38f29998be615f5683ed2a8">00073</a> <span class="preprocessor">#define REG_LED3_ON_H       (0x13)  </span>
<a name="l00074"></a><a class="code" href="PCA9685_8cpp.html#add69a6ef796f76155383762024db90a5">00074</a> <span class="preprocessor">#define REG_LED3_OFF_L      (0x14)  </span>
<a name="l00075"></a><a class="code" href="PCA9685_8cpp.html#a5265a5189db3e4d5542c9fcba4299f11">00075</a> <span class="preprocessor">#define REG_LED3_OFF_H      (0x15)  </span>
<a name="l00077"></a><a class="code" href="PCA9685_8cpp.html#ab013d4779766386779d4a6bdf3bcda49">00077</a> <span class="preprocessor">#define REG_LED4_ON_L       (0x16)  </span>
<a name="l00078"></a><a class="code" href="PCA9685_8cpp.html#aa1e6c63e065a6bfb54b370c07457d41f">00078</a> <span class="preprocessor">#define REG_LED4_ON_H       (0x17)  </span>
<a name="l00079"></a><a class="code" href="PCA9685_8cpp.html#a4d335c6e446b97c54c46f33709163c32">00079</a> <span class="preprocessor">#define REG_LED4_OFF_L      (0x18)  </span>
<a name="l00080"></a><a class="code" href="PCA9685_8cpp.html#a54ef7b55370675c0821e8bb33560cbd4">00080</a> <span class="preprocessor">#define REG_LED4_OFF_H      (0x19)  </span>
<a name="l00082"></a><a class="code" href="PCA9685_8cpp.html#ae9c757d69777ba99cda75c8632927fb4">00082</a> <span class="preprocessor">#define REG_LED5_ON_L       (0x1A)  </span>
<a name="l00083"></a><a class="code" href="PCA9685_8cpp.html#a15977adada3fa71c7728b4fd06984873">00083</a> <span class="preprocessor">#define REG_LED5_ON_H       (0x1B)  </span>
<a name="l00084"></a><a class="code" href="PCA9685_8cpp.html#a438a495c126ace5126424c7e5f2556c7">00084</a> <span class="preprocessor">#define REG_LED5_OFF_L      (0x1C)  </span>
<a name="l00085"></a><a class="code" href="PCA9685_8cpp.html#a5ec9ebcc4fc26ba4f0ba430e3aa982b1">00085</a> <span class="preprocessor">#define REG_LED5_OFF_H      (0x1D)  </span>
<a name="l00087"></a><a class="code" href="PCA9685_8cpp.html#ad2c2fc540973b77d876f0f076a3c53eb">00087</a> <span class="preprocessor">#define REG_LED6_ON_L       (0x1E)  </span>
<a name="l00088"></a><a class="code" href="PCA9685_8cpp.html#ad4193db6df0f12fa61dfa5a671c24c2e">00088</a> <span class="preprocessor">#define REG_LED6_ON_H       (0x1F)  </span>
<a name="l00089"></a><a class="code" href="PCA9685_8cpp.html#a3b58f93fb515adb2843ed3d38323d445">00089</a> <span class="preprocessor">#define REG_LED6_OFF_L      (0x20)  </span>
<a name="l00090"></a><a class="code" href="PCA9685_8cpp.html#a7af9684ed862ed2ff89e7b94120a57fa">00090</a> <span class="preprocessor">#define REG_LED6_OFF_H      (0x21)  </span>
<a name="l00092"></a><a class="code" href="PCA9685_8cpp.html#a033a7a08fde8e551cf2274f9919b4819">00092</a> <span class="preprocessor">#define REG_LED7_ON_L       (0x22)  </span>
<a name="l00093"></a><a class="code" href="PCA9685_8cpp.html#a3046437c13c4f7d67606c6bde70930b9">00093</a> <span class="preprocessor">#define REG_LED7_ON_H       (0x23)  </span>
<a name="l00094"></a><a class="code" href="PCA9685_8cpp.html#acd456778e6e331ec83b4bd357903e63b">00094</a> <span class="preprocessor">#define REG_LED7_OFF_L      (0x24)  </span>
<a name="l00095"></a><a class="code" href="PCA9685_8cpp.html#a1e340aecfeb1ed8b0624b5f888017204">00095</a> <span class="preprocessor">#define REG_LED7_OFF_H      (0x25)  </span>
<a name="l00097"></a><a class="code" href="PCA9685_8cpp.html#a1288d56108a5c2d89345973246d55248">00097</a> <span class="preprocessor">#define REG_LED8_ON_L       (0x26)  </span>
<a name="l00098"></a><a class="code" href="PCA9685_8cpp.html#a379f714aca503b3cf004aa0700f101a3">00098</a> <span class="preprocessor">#define REG_LED8_ON_H       (0x27)  </span>
<a name="l00099"></a><a class="code" href="PCA9685_8cpp.html#a38e3630f6c46f8b5f29e22a546f25cb3">00099</a> <span class="preprocessor">#define REG_LED8_OFF_L      (0x28)  </span>
<a name="l00100"></a><a class="code" href="PCA9685_8cpp.html#a8d71042eab18943de2ed985bb6b5b91f">00100</a> <span class="preprocessor">#define REG_LED8_OFF_H      (0x29)  </span>
<a name="l00102"></a><a class="code" href="PCA9685_8cpp.html#a4578878f0deb7476db0e6eaa37dbdea7">00102</a> <span class="preprocessor">#define REG_LED9_ON_L       (0x2A)  </span>
<a name="l00103"></a><a class="code" href="PCA9685_8cpp.html#a92f07492fe5552a65df564a69cf6a1a5">00103</a> <span class="preprocessor">#define REG_LED9_ON_H       (0x2B)  </span>
<a name="l00104"></a><a class="code" href="PCA9685_8cpp.html#ab5a7afca7202030eef1f92d894f7175b">00104</a> <span class="preprocessor">#define REG_LED9_OFF_L      (0x2C)  </span>
<a name="l00105"></a><a class="code" href="PCA9685_8cpp.html#afd439037fdba371a2fe8894f59528454">00105</a> <span class="preprocessor">#define REG_LED9_OFF_H      (0x2D)  </span>
<a name="l00107"></a><a class="code" href="PCA9685_8cpp.html#a8d509b959fda74719e6c74f3d6777072">00107</a> <span class="preprocessor">#define REG_LED10_ON_L      (0x2E)  </span>
<a name="l00108"></a><a class="code" href="PCA9685_8cpp.html#a1470a88afa3af44b6486f5b002c62122">00108</a> <span class="preprocessor">#define REG_LED10_ON_H      (0x2F)  </span>
<a name="l00109"></a><a class="code" href="PCA9685_8cpp.html#a7861a323e107f974429173db7ea50ce5">00109</a> <span class="preprocessor">#define REG_LED10_OFF_L     (0x30)  </span>
<a name="l00110"></a><a class="code" href="PCA9685_8cpp.html#adfcc5a2542225c451995d31b13653655">00110</a> <span class="preprocessor">#define REG_LED10_OFF_H     (0x31)  </span>
<a name="l00112"></a><a class="code" href="PCA9685_8cpp.html#a248bae0cb4c8bf3f849c7a4ad1b0b942">00112</a> <span class="preprocessor">#define REG_LED11_ON_L      (0x32)  </span>
<a name="l00113"></a><a class="code" href="PCA9685_8cpp.html#ad54f97dcd7b87c8c007b717f3d630f1f">00113</a> <span class="preprocessor">#define REG_LED11_ON_H      (0x33)  </span>
<a name="l00114"></a><a class="code" href="PCA9685_8cpp.html#a88ccee675fea019fc8fb2b742b73e0b1">00114</a> <span class="preprocessor">#define REG_LED11_OFF_L     (0x34)  </span>
<a name="l00115"></a><a class="code" href="PCA9685_8cpp.html#a155f1c7079c6978c685f1ed3d603c7e9">00115</a> <span class="preprocessor">#define REG_LED11_OFF_H     (0x35)  </span>
<a name="l00117"></a><a class="code" href="PCA9685_8cpp.html#a64dd1600db1bc08bad9ac570599607c9">00117</a> <span class="preprocessor">#define REG_LED12_ON_L      (0x36)  </span>
<a name="l00118"></a><a class="code" href="PCA9685_8cpp.html#a4736a0c35e493de92f6453863f72a556">00118</a> <span class="preprocessor">#define REG_LED12_ON_H      (0x37)  </span>
<a name="l00119"></a><a class="code" href="PCA9685_8cpp.html#abb659801835592056c4daa04b0f75d22">00119</a> <span class="preprocessor">#define REG_LED12_OFF_L     (0x38)  </span>
<a name="l00120"></a><a class="code" href="PCA9685_8cpp.html#a000f3c9eff29c6fd78fc280d5712fd1b">00120</a> <span class="preprocessor">#define REG_LED12_OFF_H     (0x39)  </span>
<a name="l00122"></a><a class="code" href="PCA9685_8cpp.html#ac38f28fc208dde66704ef792b83a817a">00122</a> <span class="preprocessor">#define REG_LED13_ON_L      (0x3A)  </span>
<a name="l00123"></a><a class="code" href="PCA9685_8cpp.html#a2ebee534e3d91bc8ba1f93ba01d91771">00123</a> <span class="preprocessor">#define REG_LED13_ON_H      (0x3B)  </span>
<a name="l00124"></a><a class="code" href="PCA9685_8cpp.html#aa465ad2b8a02124b93d161115729c295">00124</a> <span class="preprocessor">#define REG_LED13_OFF_L     (0x3C)  </span>
<a name="l00125"></a><a class="code" href="PCA9685_8cpp.html#a584401b9dcd381c9414c0df2b6371003">00125</a> <span class="preprocessor">#define REG_LED13_OFF_H     (0x3D)  </span>
<a name="l00127"></a><a class="code" href="PCA9685_8cpp.html#a620d35380a80c97356c8ec85512a9888">00127</a> <span class="preprocessor">#define REG_LED14_ON_L      (0x3E)  </span>
<a name="l00128"></a><a class="code" href="PCA9685_8cpp.html#a61ed162b4f578c705f069c79872943a0">00128</a> <span class="preprocessor">#define REG_LED14_ON_H      (0x3F)  </span>
<a name="l00129"></a><a class="code" href="PCA9685_8cpp.html#a1f51096307151518ddfc1af3a8704034">00129</a> <span class="preprocessor">#define REG_LED14_OFF_L     (0x40)  </span>
<a name="l00130"></a><a class="code" href="PCA9685_8cpp.html#a1e01f84b8c5052c04d15b61aeb598544">00130</a> <span class="preprocessor">#define REG_LED14_OFF_H     (0x41)  </span>
<a name="l00132"></a><a class="code" href="PCA9685_8cpp.html#af5bd00086ddff7733127003f1922fc28">00132</a> <span class="preprocessor">#define REG_LED15_ON_L      (0x42)  </span>
<a name="l00133"></a><a class="code" href="PCA9685_8cpp.html#a6defb077a8618541c93409423d838a99">00133</a> <span class="preprocessor">#define REG_LED15_ON_H      (0x43)  </span>
<a name="l00134"></a><a class="code" href="PCA9685_8cpp.html#ae8611365b7553ae4161f388ab773a340">00134</a> <span class="preprocessor">#define REG_LED15_OFF_L     (0x44)  </span>
<a name="l00135"></a><a class="code" href="PCA9685_8cpp.html#a850b561c239476fb9d7d4b98840eded5">00135</a> <span class="preprocessor">#define REG_LED15_OFF_H     (0x45)  </span>
<a name="l00138"></a><a class="code" href="PCA9685_8cpp.html#ad0527313d944ecc3295b4a0658c91e6a">00138</a> <span class="preprocessor">#define REG_ALL_LED_ON_L    (0xFA)  </span>
<a name="l00139"></a><a class="code" href="PCA9685_8cpp.html#aa1767b21a16131178454b0ffcc80ea56">00139</a> <span class="preprocessor">#define REG_ALL_LED_ON_H    (0xFB)  </span>
<a name="l00140"></a><a class="code" href="PCA9685_8cpp.html#af03ba534fac231e5234fd100df0a4615">00140</a> <span class="preprocessor">#define REG_ALL_LED_OFF_L   (0xFC)  </span>
<a name="l00141"></a><a class="code" href="PCA9685_8cpp.html#ab84cde6bcb504771ff16110d5d94a3f8">00141</a> <span class="preprocessor">#define REG_ALL_LED_OFF_H   (0xFD)  </span>
<a name="l00144"></a><a class="code" href="PCA9685_8cpp.html#a007c6dafc0c0e0bbfc687db6cfd2a46f">00144</a> <span class="preprocessor">#define REG_PRE_SCALE       (0xFE)  </span>
<a name="l00146"></a><a class="code" href="PCA9685_8cpp.html#a10d56381d131d39e612c340683f45def">00146</a> <span class="preprocessor">#define REG_TESTMODE        (0xFF)  </span>
<a name="l00148"></a>00148 <span class="preprocessor"></span><span class="comment">/* ######################################################################### */</span>
<a name="l00149"></a>00149 <span class="comment">/* ######################################################################### */</span>
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 <span class="comment">/* Defines to easily select bits of a byte */</span>
<a name="l00152"></a><a class="code" href="PCA9685_8cpp.html#a4ad58adf84157aebea2a98cc9402212a">00152</a> <span class="preprocessor">#define BIT_7           (0x80)</span>
<a name="l00153"></a><a class="code" href="PCA9685_8cpp.html#a7ecb78fe8c01d9722a06f10691495309">00153</a> <span class="preprocessor"></span><span class="preprocessor">#define BIT_6           (0x40)</span>
<a name="l00154"></a><a class="code" href="PCA9685_8cpp.html#aae7fda97814f05bfe68c0f6bb2ef9f11">00154</a> <span class="preprocessor"></span><span class="preprocessor">#define BIT_5           (0x20)</span>
<a name="l00155"></a><a class="code" href="PCA9685_8cpp.html#a3506434dff748a6be0d75a338a95e673">00155</a> <span class="preprocessor"></span><span class="preprocessor">#define BIT_4           (0x10)</span>
<a name="l00156"></a><a class="code" href="PCA9685_8cpp.html#a2cad0186598ab53983a3bca9b09b0a51">00156</a> <span class="preprocessor"></span><span class="preprocessor">#define BIT_3           (0x08)</span>
<a name="l00157"></a><a class="code" href="PCA9685_8cpp.html#ab94e068b5073d729aad6b2aeb613916c">00157</a> <span class="preprocessor"></span><span class="preprocessor">#define BIT_2           (0x04)</span>
<a name="l00158"></a><a class="code" href="PCA9685_8cpp.html#aec9fa7211b7c9a686f2cd522cad7989d">00158</a> <span class="preprocessor"></span><span class="preprocessor">#define BIT_1           (0x02)</span>
<a name="l00159"></a><a class="code" href="PCA9685_8cpp.html#add6d2693f5d356b091088437148f939b">00159</a> <span class="preprocessor"></span><span class="preprocessor">#define BIT_0           (0x01)</span>
<a name="l00160"></a><a class="code" href="PCA9685_8cpp.html#a45cfdfcd79df0e51589361a9c2118253">00160</a> <span class="preprocessor"></span><span class="preprocessor">#define MASK_BITS_ALL   (0xFF)  </span>
<a name="l00164"></a><a class="code" href="PCA9685_8cpp.html#aa6ab0dd695e8756df2ecde8e50921eea">00164</a> <span class="preprocessor">#define MASK_MODE1_RESTART  BIT_7   </span>
<a name="l00165"></a><a class="code" href="PCA9685_8cpp.html#a2da43eef847c41e25d851fdc2d130162">00165</a> <span class="preprocessor">#define MASK_MODE1_EXTCLK   BIT_6   </span>
<a name="l00166"></a><a class="code" href="PCA9685_8cpp.html#ae838f4f72aa174da9a4e2d24ebb80b01">00166</a> <span class="preprocessor">#define MASK_MODE1_AI       BIT_5   </span>
<a name="l00167"></a><a class="code" href="PCA9685_8cpp.html#a7ee412c906b2bce8abc6cef32994a571">00167</a> <span class="preprocessor">#define MASK_MODE1_SLEEP    BIT_4   </span>
<a name="l00168"></a><a class="code" href="PCA9685_8cpp.html#aca9fff5b6a192b3496dbffc99ca65daf">00168</a> <span class="preprocessor">#define MASK_MODE1_SUB1     BIT_3</span>
<a name="l00169"></a><a class="code" href="PCA9685_8cpp.html#a613432c062a88979fc9c00518af9640d">00169</a> <span class="preprocessor"></span><span class="preprocessor">#define MASK_MODE1_SUB2     BIT_2</span>
<a name="l00170"></a><a class="code" href="PCA9685_8cpp.html#a1d0fe2b1003ada8ef089384699708f55">00170</a> <span class="preprocessor"></span><span class="preprocessor">#define MASK_MODE1_SUB3     BIT_1</span>
<a name="l00171"></a><a class="code" href="PCA9685_8cpp.html#a377c1148dcc2bf420886c0ba98123c58">00171</a> <span class="preprocessor"></span><span class="preprocessor">#define MASK_MODE1_ALLCALL  BIT_0   </span>
<a name="l00174"></a><a class="code" href="PCA9685_8cpp.html#a8da4fabace820807f63be4670eaac35f">00174</a> <span class="preprocessor">#define MASK_MODE2_RESERVED (BIT_7|BIT_6|BIT_5) </span>
<a name="l00175"></a><a class="code" href="PCA9685_8cpp.html#a5b76c391946302b5cbc2b9d026e366c6">00175</a> <span class="preprocessor">#define MASK_MODE2_INVRT    BIT_4               </span>
<a name="l00176"></a><a class="code" href="PCA9685_8cpp.html#ae369f67a0bf446402d55b5f83abb51cc">00176</a> <span class="preprocessor">#define MASK_MODE2_OCH      BIT_3               </span>
<a name="l00177"></a><a class="code" href="PCA9685_8cpp.html#ab36b78f1d09349c5f2c8dc591fc0daa5">00177</a> <span class="preprocessor">#define MASK_MODE2_OUTDRV   BIT_2</span>
<a name="l00178"></a><a class="code" href="PCA9685_8cpp.html#a8d0345c324bfac52a50a38f1e602e2c2">00178</a> <span class="preprocessor"></span><span class="preprocessor">#define MASK_MODE2_OUTNE1   BIT_1               </span>
<a name="l00179"></a><a class="code" href="PCA9685_8cpp.html#a4423e190fb65850f6c2866b24b681ee6">00179</a> <span class="preprocessor">#define MASK_MODE2_OUTNE0   BIT_0               </span>
<a name="l00182"></a>00182 <span class="preprocessor"></span><span class="comment">/* The following masks are the same through all the LEDn + ALL_LED registers. */</span>
<a name="l00183"></a><a class="code" href="PCA9685_8cpp.html#a0545eee6eadc1952ab135665fc54dccf">00183</a> <span class="preprocessor">#define MASK_LEDn_ON_L_LEDON_COUNT_LSB      MASK_BITS_ALL               </span>
<a name="l00184"></a><a class="code" href="PCA9685_8cpp.html#ab67f62835eaf3a47a5586ebd2ea0fb01">00184</a> <span class="preprocessor">#define MASK_LEDn_ON_H_RESERVED             (BIT_7|BIT_6|BIT5)          </span>
<a name="l00185"></a><a class="code" href="PCA9685_8cpp.html#afbf6e1efbe11ed1fc5fd09cf22a4ab46">00185</a> <span class="preprocessor">#define MASK_LEDn_ON_H_FULLON               BIT_4                       </span>
<a name="l00186"></a><a class="code" href="PCA9685_8cpp.html#a7c72db7dd229de455eb7f78104be56df">00186</a> <span class="preprocessor">#define MASK_LEDn_ON_H_LEDON_COUNT_MSB      (BIT_3|BIT_2|BIT_1|BIT_0)   </span>
<a name="l00187"></a><a class="code" href="PCA9685_8cpp.html#a4d5ae031ed0a4f1460530f77bf77aa2b">00187</a> <span class="preprocessor">#define MASK_LEDn_OFF_L_LEDOFF_COUNT_LSB    MASK_BITS_ALL               </span>
<a name="l00188"></a><a class="code" href="PCA9685_8cpp.html#aa559443bc5f2804e2e1bff880a3ab06e">00188</a> <span class="preprocessor">#define MASK_LEDn_OFF_H_RESERVED            (BIT_7|BIT_6|BIT5)          </span>
<a name="l00189"></a><a class="code" href="PCA9685_8cpp.html#ad1188de54317a1778fd9026c3d41ba91">00189</a> <span class="preprocessor">#define MASK_LEDn_OFF_H_FULLOFF             BIT_4                       </span>
<a name="l00190"></a><a class="code" href="PCA9685_8cpp.html#a43ffc1eeec84b60793f914e36ca7e77a">00190</a> <span class="preprocessor">#define MASK_LEDn_OFF_H_LEDOFF_COUNT_MSB    (BIT_3|BIT_2|BIT_1|BIT_0)   </span>
<a name="l00193"></a><a class="code" href="PCA9685_8cpp.html#ac6f697a155f9f3ee367536654003480e">00193</a> <span class="preprocessor">#define MASK_PRE_SCALE  MASK_BITS_ALL   </span>
<a name="l00196"></a>00196 <span class="preprocessor"></span><span class="comment">/* The following masks are the same for all the SUBADRn registers. */</span>
<a name="l00197"></a><a class="code" href="PCA9685_8cpp.html#a498f6bf747b4de41fc970647b1887a9d">00197</a> <span class="preprocessor">#define MASK_SUBADRn_ADDRESS    (BIT_7|BIT_6|BIT_5|BIT_4|BIT_3|BIT_2|BIT_1) </span>
<a name="l00198"></a><a class="code" href="PCA9685_8cpp.html#aa280977a99f936060da96b1a6a393656">00198</a> <span class="preprocessor">#define MASK_SUBADRn_RESERVED   (BIT_0)                                     </span>
<a name="l00201"></a><a class="code" href="PCA9685_8cpp.html#af5ea77709c2eb3f6ead09431da2cfca4">00201</a> <span class="preprocessor">#define MASK_ALLCALLADR_ADDRESS     (BIT_7|BIT_6|BIT_5|BIT_4|BIT_3|BIT_2|BIT_1) </span>
<a name="l00202"></a><a class="code" href="PCA9685_8cpp.html#aee59a19dc69055a641f66740c7162520">00202</a> <span class="preprocessor">#define MASK_ALLCALLADR_RESERVED    (BIT_0)                                     </span>
<a name="l00207"></a>00207 <span class="preprocessor"></span><span class="comment">/* ######################################################################### */</span>
<a name="l00208"></a>00208 <span class="comment">/* ######################################################################### */</span>
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="comment">/* Macros to manage bits */</span>
<a name="l00212"></a><a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">00212</a> <span class="preprocessor">#define M_BIT_CLEAR( byte, mask )    ( byte   &amp;=  ~(mask) )</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span>
<a name="l00215"></a><a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">00215</a> <span class="preprocessor">#define M_BIT_SET( byte, mask )    ( byte   |=  (mask) )</span>
<a name="l00216"></a>00216 <span class="preprocessor"></span>
<a name="l00217"></a>00217 <span class="comment">/* ######################################################################### */</span>
<a name="l00218"></a>00218 <span class="comment">/* ######################################################################### */</span>
<a name="l00236"></a><a class="code" href="classPCA9685.html#ad93a532940cf018ad8f967a25d42f92a">00236</a> <a class="code" href="classPCA9685.html#ad93a532940cf018ad8f967a25d42f92a" title="Constructor; sets needed parameters.">PCA9685::PCA9685</a>(uint8_t argAddress, <span class="keywordtype">double</span> argClockFrequency)
<a name="l00237"></a>00237     :   m_address( argAddress )
<a name="l00238"></a>00238     ,   m_clockFrequency( argClockFrequency )
<a name="l00239"></a>00239 {
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <span class="comment">/* ######################################################################### */</span>
<a name="l00243"></a>00243 <span class="comment">/* ######################################################################### */</span>
<a name="l00250"></a><a class="code" href="classPCA9685.html#a1446fb0c109681ad1a7b6ba609dea958">00250</a> uint8_t <a class="code" href="classPCA9685.html#a1446fb0c109681ad1a7b6ba609dea958" title="Returns the value that has been set by the constructor.">PCA9685::address</a>()<span class="keyword"> const</span>
<a name="l00251"></a>00251 <span class="keyword"></span>{
<a name="l00252"></a>00252     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPCA9685.html#a714b5a937848140434c8d3806e352eb1" title="The PCA9685&amp;#39;s I2C slave address, as set by the constructor.">m_address</a>;
<a name="l00253"></a>00253 }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255 <span class="comment">/* ######################################################################### */</span>
<a name="l00256"></a>00256 <span class="comment">/* ######################################################################### */</span>
<a name="l00272"></a><a class="code" href="classPCA9685.html#a08219d87033026511cf345d6f7805c8f">00272</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#a08219d87033026511cf345d6f7805c8f" title="To know whether the device can be restored from a previous state, for example after...">PCA9685::canRestart</a>()
<a name="l00273"></a>00273 {
<a name="l00274"></a>00274     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#aa6ab0dd695e8756df2ecde8e50921eea" title="Read: Shows state of RESTART logic.">MASK_MODE1_RESTART</a>) != 0;
<a name="l00275"></a>00275 }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277 <span class="comment">/* ######################################################################### */</span>
<a name="l00278"></a>00278 <span class="comment">/* ######################################################################### */</span>
<a name="l00284"></a><a class="code" href="classPCA9685.html#ac6a5ba908d60962787b7e04586a27b30">00284</a> <a class="code" href="classPCA9685.html#a0903bc076d2da0315f16255bb6c8560d" title="The OutputPolicyWhenDisabled enum represents the diffenrent ways to manage outputs...">PCA9685::OutputPolicyWhenDisabled</a> <a class="code" href="classPCA9685.html#ac6a5ba908d60962787b7e04586a27b30" title="Returns the PCA9685&amp;#39;s outputs state of when its /OE pin is set to logical 1 (==output...">PCA9685::disabledOutputPolicy</a>()
<a name="l00285"></a>00285 {
<a name="l00286"></a>00286     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a> );
<a name="l00287"></a>00287 
<a name="l00288"></a>00288     <span class="keywordflow">if</span>( (reg_content &amp; <a class="code" href="PCA9685_8cpp.html#a8d0345c324bfac52a50a38f1e602e2c2" title="If bit is set, when /OE=1 all outputs are high-impedance.">MASK_MODE2_OUTNE1</a>) == 0 ) {
<a name="l00289"></a>00289         <span class="keywordflow">if</span>( (reg_content &amp; <a class="code" href="PCA9685_8cpp.html#a4423e190fb65850f6c2866b24b681ee6" title="If MASK_MODE2_OUTNE1 bit set, no influence on chip&amp;#39;s config.">MASK_MODE2_OUTNE0</a>) == 0 ) {
<a name="l00290"></a>00290             <span class="keywordflow">return</span> <a class="code" href="classPCA9685.html#a0903bc076d2da0315f16255bb6c8560dacb55e0130cb8d2cb34d5b9fba4a26db3" title="When /OE pin=1, outputs will be set to logical 0.">OutputFalse</a>;
<a name="l00291"></a>00291         } <span class="keywordflow">else</span> {
<a name="l00292"></a>00292             <span class="keywordflow">return</span> <a class="code" href="classPCA9685.html#a0903bc076d2da0315f16255bb6c8560da9543750dfea0c74bf22d0f223cae0380" title="When /OE pin=1 (output drivers not enabled), outputs will be set to logical 1.">OutputTrue</a>;
<a name="l00293"></a>00293         }
<a name="l00294"></a>00294     } <span class="keywordflow">else</span> {
<a name="l00295"></a>00295         <span class="keywordflow">return</span> <a class="code" href="classPCA9685.html#a0903bc076d2da0315f16255bb6c8560da543c563f1640f08c519d03aa265eafba" title="When /OE pin=1 (output drivers not enabled), outputs will be set to high impedance...">OutputHighImpedance</a>;
<a name="l00296"></a>00296     }
<a name="l00297"></a>00297 }
<a name="l00298"></a>00298 
<a name="l00299"></a>00299 <span class="comment">/* ######################################################################### */</span>
<a name="l00300"></a>00300 <span class="comment">/* ######################################################################### */</span>
<a name="l00307"></a><a class="code" href="classPCA9685.html#ac83dee2758549b7d00e99ae55837d37a">00307</a> <span class="keywordtype">double</span>  <a class="code" href="classPCA9685.html#ac83dee2758549b7d00e99ae55837d37a" title="Returns the value that has been set by the constructor.">PCA9685::clockFrequency</a>()<span class="keyword"> const</span>
<a name="l00308"></a>00308 <span class="keyword"></span>{
<a name="l00309"></a>00309     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPCA9685.html#ae275f4ab06d865db90fb9d982ce9552a" title="The clock frequency, to calculate prescales; set by the constructor.">m_clockFrequency</a>;
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="comment">/* ######################################################################### */</span>
<a name="l00313"></a>00313 <span class="comment">/* ######################################################################### */</span>
<a name="l00319"></a><a class="code" href="classPCA9685.html#a4dcd074cd987e3c6963d28f05cb7cd89">00319</a> <span class="keywordtype">void</span> <a class="code" href="classPCA9685.html#a4dcd074cd987e3c6963d28f05cb7cd89" title="Sets up the initial conditions to let the device work.">PCA9685::init</a>()
<a name="l00320"></a>00320 {
<a name="l00321"></a>00321     Wire.begin();
<a name="l00322"></a>00322     this-&gt;<a class="code" href="classPCA9685.html#a574bb3b9bcebc7a2fe803efd3ac99121" title="Sends a Software Reset Call (SWRST Call) command on the I2C bus.">reset</a>();
<a name="l00323"></a>00323 }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325 <span class="comment">/* ######################################################################### */</span>
<a name="l00326"></a>00326 <span class="comment">/* ######################################################################### */</span>
<a name="l00334"></a><a class="code" href="classPCA9685.html#a1487b88a100e692528b4d3439c5dcaac">00334</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#a1487b88a100e692528b4d3439c5dcaac" title="Returns whether the device will auto-increment registers number (when multiple-read/write)...">PCA9685::isAutoIncrementingRegister</a>()
<a name="l00335"></a>00335 {
<a name="l00336"></a>00336     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#ae838f4f72aa174da9a4e2d24ebb80b01" title="Register Auto-Increment.">MASK_MODE1_AI</a>) != 0;
<a name="l00337"></a>00337 }
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 <span class="comment">/* ######################################################################### */</span>
<a name="l00340"></a>00340 <span class="comment">/* ######################################################################### */</span>
<a name="l00346"></a><a class="code" href="classPCA9685.html#a774a99813a19b1ae34dbca36fed649ce">00346</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#a774a99813a19b1ae34dbca36fed649ce" title="Returns the the device&amp;#39;s power mode.">PCA9685::isSleeping</a>()
<a name="l00347"></a>00347 {
<a name="l00348"></a>00348     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#a7ee412c906b2bce8abc6cef32994a571" title="0 if normal mode,  1 if low-power (oscillator off).">MASK_MODE1_SLEEP</a>) != 0;
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351 <span class="comment">/* ######################################################################### */</span>
<a name="l00352"></a>00352 <span class="comment">/* ######################################################################### */</span>
<a name="l00361"></a><a class="code" href="classPCA9685.html#a627a477f8eca4edba4fb0c8926dd1a64">00361</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#a627a477f8eca4edba4fb0c8926dd1a64" title="Returns the MODE1_EXTCLK bit state.">PCA9685::isUsingExternalClock</a>()
<a name="l00362"></a>00362 {
<a name="l00363"></a>00363     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#a2da43eef847c41e25d851fdc2d130162" title="To use the EXTCLK pin.">MASK_MODE1_EXTCLK</a>) != 0;
<a name="l00364"></a>00364 }
<a name="l00365"></a>00365 
<a name="l00366"></a>00366 <span class="comment">/* ######################################################################### */</span>
<a name="l00367"></a>00367 <span class="comment">/* ######################################################################### */</span>
<a name="l00373"></a><a class="code" href="classPCA9685.html#ac31c3a4916e2f1bbc2241e249047fd78">00373</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#ac31c3a4916e2f1bbc2241e249047fd78">PCA9685::ledAllCallAddressEnabled</a>()
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#a377c1148dcc2bf420886c0ba98123c58" title="PCA9685 responds to &amp;quot;LED All Call&amp;quot; I2C Bus Address.">MASK_MODE1_ALLCALL</a>) != 0;
<a name="l00376"></a>00376 }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 <span class="comment">/* ######################################################################### */</span>
<a name="l00379"></a>00379 <span class="comment">/* ######################################################################### */</span>
<a name="l00386"></a><a class="code" href="classPCA9685.html#a38d3b79f31580a2f21728d7cfd9ec8cb">00386</a> <a class="code" href="classPCA9685.html#aad08d930c320d4d7f64705f849bae3e7" title="The OutputChangeEvent enum represents the different events on which the output will...">PCA9685::OutputChangeEvent</a>  <a class="code" href="classPCA9685.html#a38d3b79f31580a2f21728d7cfd9ec8cb" title="Returns the event type on which the output will be changed.">PCA9685::outputChangeEvent</a>()
<a name="l00387"></a>00387 {
<a name="l00388"></a>00388     <span class="keywordflow">if</span>( (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#ae369f67a0bf446402d55b5f83abb51cc" title="To set whether output changes on acknowledge (bit set) or on STOP command (bit cleared)...">MASK_MODE2_OCH</a>) == 0 ) {
<a name="l00389"></a>00389         <span class="keywordflow">return</span> <a class="code" href="classPCA9685.html#aad08d930c320d4d7f64705f849bae3e7a95ec52ede499e0651ee14576fa46e264" title="Outputs change on STOP command.">ChangeOnStop</a>;
<a name="l00390"></a>00390     } <span class="keywordflow">else</span> {
<a name="l00391"></a>00391         <span class="keywordflow">return</span> <a class="code" href="classPCA9685.html#aad08d930c320d4d7f64705f849bae3e7a58181090eca47bdd48ec6bdc169850c5" title="Update on ACK requires all 4 PWM channel registers to be loaded before outputs will...">ChangeOnAcknowledge</a>;
<a name="l00392"></a>00392     }
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="comment">/* ######################################################################### */</span>
<a name="l00396"></a>00396 <span class="comment">/* ######################################################################### */</span>
<a name="l00403"></a><a class="code" href="classPCA9685.html#a1f28ed7d478206afcb856cf5042b444d">00403</a> <span class="keywordtype">double</span>  <a class="code" href="classPCA9685.html#a1f28ed7d478206afcb856cf5042b444d" title="Returns the PWM output frequency, calculated from the chip&amp;#39;s prescaler and the...">PCA9685::outputFrequency</a>()
<a name="l00404"></a>00404 {
<a name="l00405"></a>00405     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ac83dee2758549b7d00e99ae55837d37a" title="Returns the value that has been set by the constructor.">clockFrequency</a>() / ((this-&gt;<a class="code" href="classPCA9685.html#a03812953c3af730535077acbed8614af" title="To get the value of the prescale that will be used to divide internal counter&amp;#39;s...">outputPrescale</a>() + 1) * 4096.0) );
<a name="l00406"></a>00406 }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408 <span class="comment">/* ######################################################################### */</span>
<a name="l00409"></a>00409 <span class="comment">/* ######################################################################### */</span>
<a name="l00415"></a><a class="code" href="classPCA9685.html#a03812953c3af730535077acbed8614af">00415</a> uint8_t <a class="code" href="classPCA9685.html#a03812953c3af730535077acbed8614af" title="To get the value of the prescale that will be used to divide internal counter&amp;#39;s...">PCA9685::outputPrescale</a>()
<a name="l00416"></a>00416 {
<a name="l00417"></a>00417     <span class="keywordflow">return</span> this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a007c6dafc0c0e0bbfc687db6cfd2a46f" title="Prescaler for output frequency.">REG_PRE_SCALE</a> );
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <span class="comment">/* ######################################################################### */</span>
<a name="l00421"></a>00421 <span class="comment">/* ######################################################################### */</span>
<a name="l00427"></a><a class="code" href="classPCA9685.html#a1f12284c299c084c5648634f90c97d51">00427</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#a1f12284c299c084c5648634f90c97d51" title="To know whether the output logical state is inverted or not.">PCA9685::outputStateInverted</a>()
<a name="l00428"></a>00428 {
<a name="l00429"></a>00429     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#a5b76c391946302b5cbc2b9d026e366c6" title="To invert output logic&amp;#39;s state.">MASK_MODE2_INVRT</a>) != 0;
<a name="l00430"></a>00430 }
<a name="l00431"></a>00431 
<a name="l00432"></a>00432 <span class="comment">/* ######################################################################### */</span>
<a name="l00433"></a>00433 <span class="comment">/* ######################################################################### */</span>
<a name="l00438"></a><a class="code" href="classPCA9685.html#a3945fc89891a9cb342edc4835df30282">00438</a> <a class="code" href="classPCA9685.html#a29e7a25f70a634495df5d7a8494611f5" title="The OutputStructure enum represents the different ways to manage output&amp;#39;s internal...">PCA9685::OutputStructure</a>    <a class="code" href="classPCA9685.html#a3945fc89891a9cb342edc4835df30282" title="To get the output driver&amp;#39;s internal structure type.">PCA9685::outputStructure</a>()
<a name="l00439"></a>00439 {
<a name="l00440"></a>00440     <span class="keywordflow">if</span>( (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#ab36b78f1d09349c5f2c8dc591fc0daa5">MASK_MODE2_OUTDRV</a>) == 0 ) {
<a name="l00441"></a>00441         <span class="keywordflow">return</span> <a class="code" href="classPCA9685.html#a29e7a25f70a634495df5d7a8494611f5ad190e799ffa2567c77d0d07322913aa8" title="The 16 LEDn outputs are configured with an open-drain structure.">OutputStructureOpenDrain</a>;
<a name="l00442"></a>00442     } <span class="keywordflow">else</span> {
<a name="l00443"></a>00443         <span class="keywordflow">return</span> <a class="code" href="classPCA9685.html#a29e7a25f70a634495df5d7a8494611f5ab7a36b4d0ef4d10f4e4e52b6864edbbd" title="The 16 LEDn outputs are configured with a totem pole structure.">OutputStructureTotemPole</a>;
<a name="l00444"></a>00444     }
<a name="l00445"></a>00445 }
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 <span class="comment">/* ######################################################################### */</span>
<a name="l00448"></a>00448 <span class="comment">/* ######################################################################### */</span>
<a name="l00456"></a><a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd">00456</a> uint8_t <a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">PCA9685::read_8u</a>(<span class="keyword">const</span> uint8_t &amp;argAddress)
<a name="l00457"></a>00457 {
<a name="l00458"></a>00458     Wire.beginTransmission( this-&gt;<a class="code" href="classPCA9685.html#a714b5a937848140434c8d3806e352eb1" title="The PCA9685&amp;#39;s I2C slave address, as set by the constructor.">m_address</a> );
<a name="l00459"></a>00459     Wire.write( argAddress );
<a name="l00460"></a>00460     Wire.endTransmission();
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     Wire.requestFrom( this-&gt;<a class="code" href="classPCA9685.html#a714b5a937848140434c8d3806e352eb1" title="The PCA9685&amp;#39;s I2C slave address, as set by the constructor.">m_address</a>, (uint8_t)CMD_MASK_READ );
<a name="l00463"></a>00463     <span class="keywordflow">return</span> Wire.read();
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 <span class="comment">/* ######################################################################### */</span>
<a name="l00467"></a>00467 <span class="comment">/* ######################################################################### */</span>
<a name="l00474"></a><a class="code" href="classPCA9685.html#a574bb3b9bcebc7a2fe803efd3ac99121">00474</a> <span class="keywordtype">void</span> <a class="code" href="classPCA9685.html#a574bb3b9bcebc7a2fe803efd3ac99121" title="Sends a Software Reset Call (SWRST Call) command on the I2C bus.">PCA9685::reset</a>()
<a name="l00475"></a>00475 {
<a name="l00476"></a>00476     Wire.beginTransmission( 0x00 ); <span class="comment">/*&lt; General Call I2C address */</span>
<a name="l00477"></a>00477     Wire.write( <a class="code" href="PCA9685_8cpp.html#a3ea3a68d4edb8c0403f22da828d9129f">CMD_SOFTWARE_RESET</a> );
<a name="l00478"></a>00478     Wire.endTransmission();
<a name="l00479"></a>00479 }
<a name="l00480"></a>00480 
<a name="l00481"></a>00481 <span class="comment">/* ######################################################################### */</span>
<a name="l00482"></a>00482 <span class="comment">/* ######################################################################### */</span>
<a name="l00493"></a><a class="code" href="classPCA9685.html#aa47a35bb8e120accf4157bd869be0c18">00493</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#aa47a35bb8e120accf4157bd869be0c18" title="Wakes up the device and restarts all of the previously active PWM channels if any...">PCA9685::restart</a>()
<a name="l00494"></a>00494 {
<a name="l00495"></a>00495 
<a name="l00496"></a>00496     <span class="keywordflow">if</span>( ! this-&gt;<a class="code" href="classPCA9685.html#a08219d87033026511cf345d6f7805c8f" title="To know whether the device can be restored from a previous state, for example after...">canRestart</a>() ) {
<a name="l00497"></a>00497         <span class="comment">/* Can&#39;t restart */</span>
<a name="l00498"></a>00498         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00499"></a>00499     }
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     <span class="comment">/* Clear SLEEP bit */</span>
<a name="l00502"></a>00502     this-&gt;<a class="code" href="classPCA9685.html#a85cbeb29ea72985bfc398bd38491704c" title="Sets the device&amp;#39;s power mode.">setSleeping</a>( <span class="keyword">false</span> );
<a name="l00503"></a>00503 <span class="comment">//    uint8_t reg_mode1_content = this-&gt;read_8u( REG_MODE1 );</span>
<a name="l00504"></a>00504 <span class="comment">//    M_BIT_CLEAR( reg_mode1_content, MASK_MODE1_SLEEP );</span>
<a name="l00505"></a>00505 <span class="comment">//    this-&gt;write_8u( REG_MODE1, reg_mode1_content );</span>
<a name="l00506"></a>00506 
<a name="l00507"></a>00507     <span class="comment">/* The SLEEP bit must be logic 0 for at least 500 μs */</span>
<a name="l00508"></a>00508     delayMicroseconds( 500 );
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     <span class="comment">/* Set RESTART bit to logic 1 */</span>
<a name="l00511"></a>00511     uint8_t reg_mode1_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> );
<a name="l00512"></a>00512     <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_mode1_content, <a class="code" href="PCA9685_8cpp.html#aa6ab0dd695e8756df2ecde8e50921eea" title="Read: Shows state of RESTART logic.">MASK_MODE1_RESTART</a> );
<a name="l00513"></a>00513     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_mode1_content );
<a name="l00514"></a>00514 
<a name="l00515"></a>00515     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00516"></a>00516 }
<a name="l00517"></a>00517 
<a name="l00518"></a>00518 <span class="comment">/* ######################################################################### */</span>
<a name="l00519"></a>00519 <span class="comment">/* ######################################################################### */</span>
<a name="l00520"></a>00520 <span class="preprocessor">#if 0</span>
<a name="l00521"></a>00521 <span class="preprocessor"></span>
<a name="l00522"></a>00522 <span class="keywordtype">void</span>    PCA9685::setAllOff()
<a name="l00523"></a>00523 {
<a name="l00524"></a>00524     <span class="comment">/* set ALL_LED_OFF_H[4] bit */</span>
<a name="l00525"></a>00525     uint8_t reg_val = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#ab84cde6bcb504771ff16110d5d94a3f8" title="Load all the LEDn_OFF registers, byte 1.">REG_ALL_LED_OFF_H</a> );
<a name="l00526"></a>00526     <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_val, <a class="code" href="PCA9685_8cpp.html#ad1188de54317a1778fd9026c3d41ba91" title="To set LEDn to be fully off.">MASK_LEDn_OFF_H_FULLOFF</a> );
<a name="l00527"></a>00527     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#ad1188de54317a1778fd9026c3d41ba91" title="To set LEDn to be fully off.">MASK_LEDn_OFF_H_FULLOFF</a>, reg_val );
<a name="l00528"></a>00528 
<a name="l00529"></a>00529     <span class="comment">/* Clear ALL_LED_ON_H[4] bit (otherwise it overrides ALL_LED_OFF_H[4]) */</span>
<a name="l00530"></a>00530     reg_val = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#aa1767b21a16131178454b0ffcc80ea56" title="Load all the LEDn_ON registers, byte 1.">REG_ALL_LED_ON_H</a> );
<a name="l00531"></a>00531     <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_val, <a class="code" href="PCA9685_8cpp.html#afbf6e1efbe11ed1fc5fd09cf22a4ab46" title="To set LEDn to be fully on.">MASK_LEDn_ON_H_FULLON</a> );
<a name="l00532"></a>00532     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#aa1767b21a16131178454b0ffcc80ea56" title="Load all the LEDn_ON registers, byte 1.">REG_ALL_LED_ON_H</a>, reg_val );
<a name="l00533"></a>00533 }
<a name="l00534"></a>00534 
<a name="l00535"></a>00535 <span class="comment">/* ######################################################################### */</span>
<a name="l00536"></a>00536 <span class="comment">/* ######################################################################### */</span>
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 <span class="keywordtype">void</span>    PCA9685::setAllOn()
<a name="l00539"></a>00539 {
<a name="l00540"></a>00540     uint8_t reg_val = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#aa1767b21a16131178454b0ffcc80ea56" title="Load all the LEDn_ON registers, byte 1.">REG_ALL_LED_ON_H</a> );
<a name="l00541"></a>00541 
<a name="l00542"></a>00542     <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_val, <a class="code" href="PCA9685_8cpp.html#afbf6e1efbe11ed1fc5fd09cf22a4ab46" title="To set LEDn to be fully on.">MASK_LEDn_ON_H_FULLON</a> );
<a name="l00543"></a>00543 
<a name="l00544"></a>00544     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#aa1767b21a16131178454b0ffcc80ea56" title="Load all the LEDn_ON registers, byte 1.">REG_ALL_LED_ON_H</a>, reg_val );
<a name="l00545"></a>00545 }
<a name="l00546"></a>00546 <span class="preprocessor">#endif</span>
<a name="l00547"></a>00547 <span class="preprocessor"></span>
<a name="l00548"></a>00548 <span class="comment">/* ######################################################################### */</span>
<a name="l00549"></a>00549 <span class="comment">/* ######################################################################### */</span>
<a name="l00557"></a><a class="code" href="classPCA9685.html#a59af34f2cf8182c6022be2ace5f957d1">00557</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#a59af34f2cf8182c6022be2ace5f957d1" title="To set whether the device will auto-increment registers number (when multiple-read/write)...">PCA9685::setAutoIncrementRegister</a>(<span class="keywordtype">bool</span> argEnableAutoIncrement)
<a name="l00558"></a>00558 {
<a name="l00559"></a>00559     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> );
<a name="l00560"></a>00560 
<a name="l00561"></a>00561     <span class="keywordflow">if</span>( argEnableAutoIncrement ) {
<a name="l00562"></a>00562         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#ae838f4f72aa174da9a4e2d24ebb80b01" title="Register Auto-Increment.">MASK_MODE1_AI</a> );
<a name="l00563"></a>00563     } <span class="keywordflow">else</span> {
<a name="l00564"></a>00564         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#ae838f4f72aa174da9a4e2d24ebb80b01" title="Register Auto-Increment.">MASK_MODE1_AI</a> );
<a name="l00565"></a>00565     }
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_content );
<a name="l00568"></a>00568 }
<a name="l00569"></a>00569 
<a name="l00570"></a>00570 <span class="comment">/* ######################################################################### */</span>
<a name="l00571"></a>00571 <span class="comment">/* ######################################################################### */</span>
<a name="l00578"></a><a class="code" href="classPCA9685.html#aa375a2f897bf7a0d7b01808e89b82e7a">00578</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#aa375a2f897bf7a0d7b01808e89b82e7a" title="To set whether the device will answer to &amp;quot;Led All Call&amp;quot; address.">PCA9685::setLedAllCallAddressEnabled</a>(<span class="keywordtype">bool</span> argEnabled)
<a name="l00579"></a>00579 {
<a name="l00580"></a>00580     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> );
<a name="l00581"></a>00581 
<a name="l00582"></a>00582     <span class="keywordflow">if</span>( argEnabled ) {
<a name="l00583"></a>00583         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a377c1148dcc2bf420886c0ba98123c58" title="PCA9685 responds to &amp;quot;LED All Call&amp;quot; I2C Bus Address.">MASK_MODE1_ALLCALL</a> );
<a name="l00584"></a>00584     } <span class="keywordflow">else</span> {
<a name="l00585"></a>00585         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a377c1148dcc2bf420886c0ba98123c58" title="PCA9685 responds to &amp;quot;LED All Call&amp;quot; I2C Bus Address.">MASK_MODE1_ALLCALL</a> );
<a name="l00586"></a>00586     }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_content );
<a name="l00589"></a>00589 }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 <span class="comment">/* ######################################################################### */</span>
<a name="l00592"></a>00592 <span class="comment">/* ######################################################################### */</span>
<a name="l00601"></a><a class="code" href="classPCA9685.html#a1d524caa7350c53f91ba390a90b10c7a">00601</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#a1d524caa7350c53f91ba390a90b10c7a" title="To set the PCA9685&amp;#39;s outputs state for when the /OE pin is set to logical 1 (==device&amp;#39;s...">PCA9685::setDisabledOutputPolicy</a>(<a class="code" href="classPCA9685.html#a0903bc076d2da0315f16255bb6c8560d" title="The OutputPolicyWhenDisabled enum represents the diffenrent ways to manage outputs...">OutputPolicyWhenDisabled</a> argPolicy)
<a name="l00602"></a>00602 {
<a name="l00603"></a>00603     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a> );
<a name="l00604"></a>00604 
<a name="l00605"></a>00605     <span class="keywordflow">switch</span>( argPolicy )
<a name="l00606"></a>00606     {
<a name="l00607"></a>00607         <span class="keywordflow">default</span>:
<a name="l00608"></a>00608         <span class="keywordflow">case</span> <a class="code" href="classPCA9685.html#a0903bc076d2da0315f16255bb6c8560dacb55e0130cb8d2cb34d5b9fba4a26db3" title="When /OE pin=1, outputs will be set to logical 0.">OutputFalse</a>:
<a name="l00609"></a>00609             <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a8d0345c324bfac52a50a38f1e602e2c2" title="If bit is set, when /OE=1 all outputs are high-impedance.">MASK_MODE2_OUTNE1</a> );
<a name="l00610"></a>00610             <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a4423e190fb65850f6c2866b24b681ee6" title="If MASK_MODE2_OUTNE1 bit set, no influence on chip&amp;#39;s config.">MASK_MODE2_OUTNE0</a> );
<a name="l00611"></a>00611             <span class="keywordflow">break</span>;
<a name="l00612"></a>00612 
<a name="l00613"></a>00613         <span class="keywordflow">case</span> <a class="code" href="classPCA9685.html#a0903bc076d2da0315f16255bb6c8560da543c563f1640f08c519d03aa265eafba" title="When /OE pin=1 (output drivers not enabled), outputs will be set to high impedance...">OutputHighImpedance</a>:
<a name="l00614"></a>00614             <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a8d0345c324bfac52a50a38f1e602e2c2" title="If bit is set, when /OE=1 all outputs are high-impedance.">MASK_MODE2_OUTNE1</a> );
<a name="l00615"></a>00615             <span class="keywordflow">break</span>;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617         <span class="keywordflow">case</span> <a class="code" href="classPCA9685.html#a0903bc076d2da0315f16255bb6c8560da9543750dfea0c74bf22d0f223cae0380" title="When /OE pin=1 (output drivers not enabled), outputs will be set to logical 1.">OutputTrue</a>:
<a name="l00618"></a>00618             <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a8d0345c324bfac52a50a38f1e602e2c2" title="If bit is set, when /OE=1 all outputs are high-impedance.">MASK_MODE2_OUTNE1</a> );
<a name="l00619"></a>00619             <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>(   reg_content, <a class="code" href="PCA9685_8cpp.html#a4423e190fb65850f6c2866b24b681ee6" title="If MASK_MODE2_OUTNE1 bit set, no influence on chip&amp;#39;s config.">MASK_MODE2_OUTNE0</a> );
<a name="l00620"></a>00620             <span class="keywordflow">break</span>;
<a name="l00621"></a>00621     }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a>, reg_content );
<a name="l00624"></a>00624 }
<a name="l00625"></a>00625 
<a name="l00626"></a>00626 <span class="comment">/* ######################################################################### */</span>
<a name="l00627"></a>00627 <span class="comment">/* ######################################################################### */</span>
<a name="l00652"></a><a class="code" href="classPCA9685.html#a55c9ab6e79557fd81da7fb32a721154f">00652</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#a55c9ab6e79557fd81da7fb32a721154f" title="To set the cycle &amp;amp; phase of an output.">PCA9685::setOutput</a>(uint8_t argOutputNbr, uint16_t argOn, uint16_t argOff)
<a name="l00653"></a>00653 {
<a name="l00654"></a>00654     <span class="keywordflow">if</span>( argOutputNbr &gt;= <a class="code" href="classPCA9685.html#ab4ad6fea80e8ab389ec35c4c2a3717eb" title="The number of outputs the PCA9685 have.">OUTPUT_COUNT</a> ) {
<a name="l00655"></a>00655         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00656"></a>00656     }
<a name="l00657"></a>00657 
<a name="l00658"></a>00658     <span class="keywordflow">if</span>( argOn &gt; 4095 )
<a name="l00659"></a>00659         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00660"></a>00660 
<a name="l00661"></a>00661     <span class="keywordflow">if</span>( argOff &gt; 4095 )
<a name="l00662"></a>00662         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00663"></a>00663 
<a name="l00664"></a>00664 
<a name="l00665"></a>00665     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a44757078205b23b1e1e47d0abe7c99e6" title="LED0 output and brightness control byte 0.">REG_LED0_ON_L</a>  + 4 * argOutputNbr, argOn );         <span class="comment">/*&lt; Write the LSBs */</span>
<a name="l00666"></a>00666     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a0250a1a53eacd968363471ebf32ee140" title="LED0 output and brightness control byte 1.">REG_LED0_ON_H</a>  + 4 * argOutputNbr, argOn &gt;&gt; 8 );    <span class="comment">/*&lt; Write the MSBs */</span>
<a name="l00667"></a>00667     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a558bff9a21163e799d439f213563cd59" title="LED0 output and brightness control byte 2.">REG_LED0_OFF_L</a> + 4 * argOutputNbr, argOff );        <span class="comment">/*&lt; Write the LSBs */</span>
<a name="l00668"></a>00668     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a41899db3c5a9355cd6d61035122fec7d" title="LED0 output and brightness control byte 3.">REG_LED0_OFF_H</a> + 4 * argOutputNbr, argOff &gt;&gt; 8 );   <span class="comment">/*&lt; Write the MSBs */</span>
<a name="l00669"></a>00669 
<a name="l00670"></a>00670     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00671"></a>00671 }
<a name="l00672"></a>00672 
<a name="l00673"></a>00673 <span class="comment">/* ######################################################################### */</span>
<a name="l00674"></a>00674 <span class="comment">/* ######################################################################### */</span>
<a name="l00682"></a><a class="code" href="classPCA9685.html#ab63165bcfa9edc6cace50c41ed96c2a0">00682</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#ab63165bcfa9edc6cace50c41ed96c2a0" title="To set the event type on which the output will be changed.">PCA9685::setOutputChangeEvent</a>(<a class="code" href="classPCA9685.html#aad08d930c320d4d7f64705f849bae3e7" title="The OutputChangeEvent enum represents the different events on which the output will...">OutputChangeEvent</a> argEvent)
<a name="l00683"></a>00683 {
<a name="l00684"></a>00684     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a> );
<a name="l00685"></a>00685 
<a name="l00686"></a>00686     <span class="keywordflow">if</span>( argEvent == <a class="code" href="classPCA9685.html#aad08d930c320d4d7f64705f849bae3e7a95ec52ede499e0651ee14576fa46e264" title="Outputs change on STOP command.">ChangeOnStop</a> )
<a name="l00687"></a>00687         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#ae369f67a0bf446402d55b5f83abb51cc" title="To set whether output changes on acknowledge (bit set) or on STOP command (bit cleared)...">MASK_MODE2_OCH</a> );
<a name="l00688"></a>00688     <span class="keywordflow">else</span>
<a name="l00689"></a>00689         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#ae369f67a0bf446402d55b5f83abb51cc" title="To set whether output changes on acknowledge (bit set) or on STOP command (bit cleared)...">MASK_MODE2_OCH</a> );
<a name="l00690"></a>00690 
<a name="l00691"></a>00691     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a>, reg_content );
<a name="l00692"></a>00692 }
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 <span class="comment">/* ######################################################################### */</span>
<a name="l00695"></a>00695 <span class="comment">/* ######################################################################### */</span>
<a name="l00715"></a><a class="code" href="classPCA9685.html#a3886b92c262f51a0a236a42cacc36034">00715</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#a3886b92c262f51a0a236a42cacc36034" title="Calculates then sets internal counter&amp;#39;s prescale value to let the output&amp;#39;s...">PCA9685::setOutputFrequency</a>(<span class="keywordtype">double</span> argFrequency_Hz)
<a name="l00716"></a>00716 {
<a name="l00717"></a>00717     <span class="keywordtype">double</span> maxFrequency  = (this-&gt;<a class="code" href="classPCA9685.html#ac83dee2758549b7d00e99ae55837d37a" title="Returns the value that has been set by the constructor.">clockFrequency</a>() / 4096.0 );
<a name="l00718"></a>00718     <span class="keywordtype">double</span> minFrequency  = (this-&gt;<a class="code" href="classPCA9685.html#ac83dee2758549b7d00e99ae55837d37a" title="Returns the value that has been set by the constructor.">clockFrequency</a>() / ((0xFF + 1) * 4096.0) );
<a name="l00719"></a>00719 
<a name="l00720"></a>00720     <a class="code" href="PCA9685_8cpp.html#a6a51d7a3b4a536c743409e954040830f">DBG</a>( String( <span class="stringliteral">&quot;minFrequency: &quot;</span>) + String( (<span class="keywordtype">long</span>) minFrequency ) + <span class="stringliteral">&quot;Hz&quot;</span> );
<a name="l00721"></a>00721     <a class="code" href="PCA9685_8cpp.html#a6a51d7a3b4a536c743409e954040830f">DBG</a>( String( <span class="stringliteral">&quot;maxFrequency: &quot;</span>) + String( (<span class="keywordtype">long</span>) maxFrequency ) + <span class="stringliteral">&quot;Hz&quot;</span> );
<a name="l00722"></a>00722 
<a name="l00723"></a>00723 
<a name="l00724"></a>00724     <span class="comment">/* Check that argFrequency_Hz is in a reachable range */</span>
<a name="l00725"></a>00725     <span class="keywordflow">if</span>( argFrequency_Hz &gt; maxFrequency ) {
<a name="l00726"></a>00726         <a class="code" href="PCA9685_8cpp.html#a108d6c5c51dd46e82a62b262394f0242">WARN</a>( <span class="stringliteral">&quot;given frequency is out of range (higher than max reachable frequency)&quot;</span> );
<a name="l00727"></a>00727         <a class="code" href="PCA9685_8cpp.html#a108d6c5c51dd46e82a62b262394f0242">WARN</a>( String( (<span class="keywordtype">long</span>) argFrequency_Hz )
<a name="l00728"></a>00728               + <span class="stringliteral">&quot;(given) &gt; &quot;</span> + String( (<span class="keywordtype">long</span>)maxFrequency ) + <span class="stringliteral">&quot;(max)&quot;</span> );
<a name="l00729"></a>00729         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00730"></a>00730     }
<a name="l00731"></a>00731 
<a name="l00732"></a>00732     <span class="keywordflow">if</span>( argFrequency_Hz &lt; minFrequency ) {
<a name="l00733"></a>00733         <a class="code" href="PCA9685_8cpp.html#a108d6c5c51dd46e82a62b262394f0242">WARN</a>( <span class="stringliteral">&quot;given frequency is out of range (lower than lowest reachable frequency)&quot;</span> );
<a name="l00734"></a>00734         <a class="code" href="PCA9685_8cpp.html#a108d6c5c51dd46e82a62b262394f0242">WARN</a>( String( (<span class="keywordtype">long</span>) argFrequency_Hz )
<a name="l00735"></a>00735               + <span class="stringliteral">&quot;(given) &lt; &quot;</span> + String( (<span class="keywordtype">long</span>)minFrequency ) + <span class="stringliteral">&quot;(min)&quot;</span> );
<a name="l00736"></a>00736         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00737"></a>00737     }
<a name="l00738"></a>00738 
<a name="l00739"></a>00739     <span class="keywordtype">float</span> prescaleValue
<a name="l00740"></a>00740             = ( this-&gt;<a class="code" href="classPCA9685.html#ac83dee2758549b7d00e99ae55837d37a" title="Returns the value that has been set by the constructor.">clockFrequency</a>() / (4096.0 * argFrequency_Hz) ) - 1;
<a name="l00741"></a>00741     <a class="code" href="PCA9685_8cpp.html#a6a51d7a3b4a536c743409e954040830f">DBG</a>( <span class="stringliteral">&quot;Estimated prescale == &quot;</span> + (<span class="keywordtype">long</span>)prescaleValue );
<a name="l00742"></a>00742     uint8_t prescale = floor( prescaleValue + 0.5 );
<a name="l00743"></a>00743     <a class="code" href="PCA9685_8cpp.html#a6a51d7a3b4a536c743409e954040830f">DBG</a>( <span class="stringliteral">&quot;Final pre-scale == &quot;</span> + prescale );
<a name="l00744"></a>00744 
<a name="l00745"></a>00745     this-&gt;<a class="code" href="classPCA9685.html#acec9bda7d4e65fa8998fc228f6a39a3d" title="To set the value of the prescale that will be used to divide internal counter&amp;#39;s...">setOutputPrescale</a>( prescale );
<a name="l00746"></a>00746     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00747"></a>00747 }
<a name="l00748"></a>00748 
<a name="l00749"></a>00749 <span class="comment">/* ######################################################################### */</span>
<a name="l00750"></a>00750 <span class="comment">/* ######################################################################### */</span>
<a name="l00757"></a><a class="code" href="classPCA9685.html#acec9bda7d4e65fa8998fc228f6a39a3d">00757</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#acec9bda7d4e65fa8998fc228f6a39a3d" title="To set the value of the prescale that will be used to divide internal counter&amp;#39;s...">PCA9685::setOutputPrescale</a>(uint8_t argPrescale)
<a name="l00758"></a>00758 {
<a name="l00759"></a>00759     <span class="comment">/* 1- Go to sleep if PCA9685 was awake */</span>
<a name="l00760"></a>00760     <span class="keywordtype">bool</span> wasSleeping   = this-&gt;<a class="code" href="classPCA9685.html#a774a99813a19b1ae34dbca36fed649ce" title="Returns the the device&amp;#39;s power mode.">isSleeping</a>();
<a name="l00761"></a>00761     <span class="keywordflow">if</span>( ! wasSleeping )
<a name="l00762"></a>00762         this-&gt;<a class="code" href="classPCA9685.html#a85cbeb29ea72985bfc398bd38491704c" title="Sets the device&amp;#39;s power mode.">setSleeping</a>( <span class="keyword">true</span> );
<a name="l00763"></a>00763 
<a name="l00764"></a>00764     <span class="comment">/* 2- Set the prescale value */</span>
<a name="l00765"></a>00765     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a007c6dafc0c0e0bbfc687db6cfd2a46f" title="Prescaler for output frequency.">REG_PRE_SCALE</a>, argPrescale );
<a name="l00766"></a>00766 
<a name="l00767"></a>00767     <span class="comment">/* 3- Restore sleep state */</span>
<a name="l00768"></a>00768     this-&gt;<a class="code" href="classPCA9685.html#a85cbeb29ea72985bfc398bd38491704c" title="Sets the device&amp;#39;s power mode.">setSleeping</a>( wasSleeping );
<a name="l00769"></a>00769 }
<a name="l00770"></a>00770 
<a name="l00771"></a>00771 <span class="comment">/* ######################################################################### */</span>
<a name="l00772"></a>00772 <span class="comment">/* ######################################################################### */</span>
<a name="l00781"></a><a class="code" href="classPCA9685.html#a5797b579471ed2940bebaeaf8de62b1b">00781</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#a5797b579471ed2940bebaeaf8de62b1b" title="To set wether the output&amp;#39;s logical state is inverted or not. Applicable when...">PCA9685::setOutputStateInverted</a>(<span class="keywordtype">bool</span> argInverted)
<a name="l00782"></a>00782 {
<a name="l00783"></a>00783     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a> );
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     <span class="keywordflow">if</span>( argInverted ) {
<a name="l00786"></a>00786         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a5b76c391946302b5cbc2b9d026e366c6" title="To invert output logic&amp;#39;s state.">MASK_MODE2_INVRT</a> );
<a name="l00787"></a>00787     } <span class="keywordflow">else</span> {
<a name="l00788"></a>00788         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a5b76c391946302b5cbc2b9d026e366c6" title="To invert output logic&amp;#39;s state.">MASK_MODE2_INVRT</a> );
<a name="l00789"></a>00789     }
<a name="l00790"></a>00790 
<a name="l00791"></a>00791     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a>, reg_content );
<a name="l00792"></a>00792 }
<a name="l00793"></a>00793 
<a name="l00794"></a>00794 <span class="comment">/* ######################################################################### */</span>
<a name="l00795"></a>00795 <span class="comment">/* ######################################################################### */</span>
<a name="l00803"></a><a class="code" href="classPCA9685.html#afc54afe1dfd11e15577493685ceb314e">00803</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#afc54afe1dfd11e15577493685ceb314e" title="To set the output driver&amp;#39;s internal structure type.">PCA9685::setOutputStructure</a>(<a class="code" href="classPCA9685.html#a29e7a25f70a634495df5d7a8494611f5" title="The OutputStructure enum represents the different ways to manage output&amp;#39;s internal...">OutputStructure</a> argStructure)
<a name="l00804"></a>00804 {
<a name="l00805"></a>00805     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a> );
<a name="l00806"></a>00806 
<a name="l00807"></a>00807     <span class="keywordflow">if</span>( argStructure == <a class="code" href="classPCA9685.html#a29e7a25f70a634495df5d7a8494611f5ad190e799ffa2567c77d0d07322913aa8" title="The 16 LEDn outputs are configured with an open-drain structure.">OutputStructureOpenDrain</a> )
<a name="l00808"></a>00808         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#ab36b78f1d09349c5f2c8dc591fc0daa5">MASK_MODE2_OUTDRV</a> );
<a name="l00809"></a>00809     <span class="keywordflow">else</span>
<a name="l00810"></a>00810         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#ab36b78f1d09349c5f2c8dc591fc0daa5">MASK_MODE2_OUTDRV</a> );
<a name="l00811"></a>00811 
<a name="l00812"></a>00812     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a80d98ba6dfe312e7cdf817a10a9bfda3" title="Mode register 2.">REG_MODE2</a>, reg_content );
<a name="l00813"></a>00813 }
<a name="l00814"></a>00814 
<a name="l00815"></a>00815 <span class="comment">/* ######################################################################### */</span>
<a name="l00816"></a>00816 <span class="comment">/* ######################################################################### */</span>
<a name="l00839"></a><a class="code" href="classPCA9685.html#a85cbeb29ea72985bfc398bd38491704c">00839</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#a85cbeb29ea72985bfc398bd38491704c" title="Sets the device&amp;#39;s power mode.">PCA9685::setSleeping</a>(<span class="keywordtype">bool</span> argIsSleeping)
<a name="l00840"></a>00840 {
<a name="l00841"></a>00841     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> );
<a name="l00842"></a>00842 
<a name="l00843"></a>00843     <span class="keywordflow">if</span>( argIsSleeping ) {
<a name="l00844"></a>00844         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a7ee412c906b2bce8abc6cef32994a571" title="0 if normal mode,  1 if low-power (oscillator off).">MASK_MODE1_SLEEP</a> );
<a name="l00845"></a>00845     } <span class="keywordflow">else</span> {
<a name="l00846"></a>00846         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a7ee412c906b2bce8abc6cef32994a571" title="0 if normal mode,  1 if low-power (oscillator off).">MASK_MODE1_SLEEP</a> );
<a name="l00847"></a>00847     }
<a name="l00848"></a>00848 
<a name="l00849"></a>00849     <span class="comment">/* Write register&#39;s content */</span>
<a name="l00850"></a>00850     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_content );
<a name="l00851"></a>00851 
<a name="l00852"></a>00852     <span class="keywordflow">if</span>( argIsSleeping == <span class="keyword">false</span> ) {
<a name="l00853"></a>00853         <span class="comment">/* Because it takes the oscillator up to 500µs to wake up, we apply a</span>
<a name="l00854"></a>00854 <span class="comment">         * delay to be shure we won&#39;t do erroneous readings on PWM control</span>
<a name="l00855"></a>00855 <span class="comment">         * registers. */</span>
<a name="l00856"></a>00856         delayMicroseconds( 500 );
<a name="l00857"></a>00857     }
<a name="l00858"></a>00858 }
<a name="l00859"></a>00859 
<a name="l00860"></a>00860 <span class="comment">/* ######################################################################### */</span>
<a name="l00861"></a>00861 <span class="comment">/* ######################################################################### */</span>
<a name="l00862"></a>00862 
<a name="l00863"></a><a class="code" href="classPCA9685.html#a583e71b0b70a59ce35cac77a11643f8b">00863</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#a583e71b0b70a59ce35cac77a11643f8b">PCA9685::setSubAddress1Enabled</a>(<span class="keywordtype">bool</span> argEnabled)
<a name="l00864"></a>00864 {
<a name="l00865"></a>00865     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> );
<a name="l00866"></a>00866 
<a name="l00867"></a>00867     <span class="keywordflow">if</span>( argEnabled ) {
<a name="l00868"></a>00868         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#aca9fff5b6a192b3496dbffc99ca65daf">MASK_MODE1_SUB1</a> );
<a name="l00869"></a>00869     } <span class="keywordflow">else</span> {
<a name="l00870"></a>00870         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#aca9fff5b6a192b3496dbffc99ca65daf">MASK_MODE1_SUB1</a> );
<a name="l00871"></a>00871     }
<a name="l00872"></a>00872 
<a name="l00873"></a>00873     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_content );
<a name="l00874"></a>00874 }
<a name="l00875"></a>00875 
<a name="l00876"></a>00876 <span class="comment">/* ######################################################################### */</span>
<a name="l00877"></a>00877 <span class="comment">/* ######################################################################### */</span>
<a name="l00878"></a>00878 
<a name="l00879"></a><a class="code" href="classPCA9685.html#aea23c1b1147569b3b4acef255e1347aa">00879</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#aea23c1b1147569b3b4acef255e1347aa">PCA9685::setSubAddress2Enabled</a>(<span class="keywordtype">bool</span> argEnabled)
<a name="l00880"></a>00880 {
<a name="l00881"></a>00881     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> );
<a name="l00882"></a>00882 
<a name="l00883"></a>00883     <span class="keywordflow">if</span>( argEnabled ) {
<a name="l00884"></a>00884         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a613432c062a88979fc9c00518af9640d">MASK_MODE1_SUB2</a> );
<a name="l00885"></a>00885     } <span class="keywordflow">else</span> {
<a name="l00886"></a>00886         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a613432c062a88979fc9c00518af9640d">MASK_MODE1_SUB2</a> );
<a name="l00887"></a>00887     }
<a name="l00888"></a>00888 
<a name="l00889"></a>00889     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_content );
<a name="l00890"></a>00890 }
<a name="l00891"></a>00891 
<a name="l00892"></a>00892 <span class="comment">/* ######################################################################### */</span>
<a name="l00893"></a>00893 <span class="comment">/* ######################################################################### */</span>
<a name="l00894"></a>00894 
<a name="l00895"></a><a class="code" href="classPCA9685.html#a60bd2a006b560f7facfb5f4b196181b5">00895</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#a60bd2a006b560f7facfb5f4b196181b5">PCA9685::setSubAddress3Enabled</a>(<span class="keywordtype">bool</span> argEnabled)
<a name="l00896"></a>00896 {
<a name="l00897"></a>00897     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> );
<a name="l00898"></a>00898 
<a name="l00899"></a>00899     <span class="keywordflow">if</span>( argEnabled ) {
<a name="l00900"></a>00900         <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a1d0fe2b1003ada8ef089384699708f55">MASK_MODE1_SUB3</a> );
<a name="l00901"></a>00901     } <span class="keywordflow">else</span> {
<a name="l00902"></a>00902         <a class="code" href="PCA9685_8cpp.html#a662413da01b4a4ab46e52645f4ef93dd">M_BIT_CLEAR</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a1d0fe2b1003ada8ef089384699708f55">MASK_MODE1_SUB3</a> );
<a name="l00903"></a>00903     }
<a name="l00904"></a>00904 
<a name="l00905"></a>00905     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_content );
<a name="l00906"></a>00906 }
<a name="l00907"></a>00907 
<a name="l00908"></a>00908 <span class="comment">/* ######################################################################### */</span>
<a name="l00909"></a>00909 <span class="comment">/* ######################################################################### */</span>
<a name="l00917"></a><a class="code" href="classPCA9685.html#a5450d95643bf09c9a5c5276971901294">00917</a> <span class="keywordtype">void</span>    <a class="code" href="classPCA9685.html#a5450d95643bf09c9a5c5276971901294" title="To use an external clock source instead of the internal one.">PCA9685::setUseExternalClock</a>(<span class="keywordtype">void</span>)
<a name="l00918"></a>00918 {
<a name="l00919"></a>00919     uint8_t reg_content = this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> );
<a name="l00920"></a>00920 
<a name="l00921"></a>00921     <span class="comment">/* 1 - Turn off internal oscillator */</span>
<a name="l00922"></a>00922     <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a7ee412c906b2bce8abc6cef32994a571" title="0 if normal mode,  1 if low-power (oscillator off).">MASK_MODE1_SLEEP</a> );
<a name="l00923"></a>00923     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_content );
<a name="l00924"></a>00924 
<a name="l00925"></a>00925     <span class="comment">/* 2 - Enable external clock and resume. */</span>
<a name="l00926"></a>00926     <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a2da43eef847c41e25d851fdc2d130162" title="To use the EXTCLK pin.">MASK_MODE1_EXTCLK</a> );
<a name="l00927"></a>00927     <a class="code" href="PCA9685_8cpp.html#ae6ff045c44831392b68a887ce66e9bb3">M_BIT_SET</a>( reg_content, <a class="code" href="PCA9685_8cpp.html#a7ee412c906b2bce8abc6cef32994a571" title="0 if normal mode,  1 if low-power (oscillator off).">MASK_MODE1_SLEEP</a> );
<a name="l00928"></a>00928     this-&gt;<a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">write_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a>, reg_content );
<a name="l00929"></a>00929 }
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 <span class="comment">/* ######################################################################### */</span>
<a name="l00932"></a>00932 <span class="comment">/* ######################################################################### */</span>
<a name="l00933"></a>00933 
<a name="l00934"></a><a class="code" href="classPCA9685.html#ae450cd77d36495322c7a566b64a61380">00934</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#ae450cd77d36495322c7a566b64a61380">PCA9685::subAddress1Enabled</a>()
<a name="l00935"></a>00935 {
<a name="l00936"></a>00936     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#aca9fff5b6a192b3496dbffc99ca65daf">MASK_MODE1_SUB1</a>) != 0;
<a name="l00937"></a>00937 }
<a name="l00938"></a>00938 
<a name="l00939"></a>00939 <span class="comment">/* ######################################################################### */</span>
<a name="l00940"></a>00940 <span class="comment">/* ######################################################################### */</span>
<a name="l00941"></a>00941 
<a name="l00942"></a><a class="code" href="classPCA9685.html#a7a2e2e3e54ed2f79c82875752495dbd7">00942</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#a7a2e2e3e54ed2f79c82875752495dbd7">PCA9685::subAddress2Enabled</a>()
<a name="l00943"></a>00943 {
<a name="l00944"></a>00944     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#a613432c062a88979fc9c00518af9640d">MASK_MODE1_SUB2</a>) != 0;
<a name="l00945"></a>00945 }
<a name="l00946"></a>00946 
<a name="l00947"></a>00947 <span class="comment">/* ######################################################################### */</span>
<a name="l00948"></a>00948 <span class="comment">/* ######################################################################### */</span>
<a name="l00949"></a>00949 
<a name="l00950"></a><a class="code" href="classPCA9685.html#ac1dc9b45bf1ad7b2b7e466e241e0ecfe">00950</a> <span class="keywordtype">bool</span>    <a class="code" href="classPCA9685.html#ac1dc9b45bf1ad7b2b7e466e241e0ecfe">PCA9685::subAddress3Enabled</a>()
<a name="l00951"></a>00951 {
<a name="l00952"></a>00952     <span class="keywordflow">return</span> (this-&gt;<a class="code" href="classPCA9685.html#ab0dffd7507a8acce84eaf4b740c46efd" title="Convenience function to read a 8-bits unisgned data from the register argAddress...">read_8u</a>( <a class="code" href="PCA9685_8cpp.html#a01082c2505bcd579197cb2f1163c352c" title="Mode register 1.">REG_MODE1</a> ) &amp; <a class="code" href="PCA9685_8cpp.html#a1d0fe2b1003ada8ef089384699708f55">MASK_MODE1_SUB3</a>) != 0;
<a name="l00953"></a>00953 }
<a name="l00954"></a>00954 
<a name="l00955"></a>00955 <span class="comment">/* ######################################################################### */</span>
<a name="l00956"></a>00956 <span class="comment">/* ######################################################################### */</span>
<a name="l00965"></a><a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2">00965</a> <span class="keywordtype">void</span> <a class="code" href="classPCA9685.html#ad3d6eecf31511999b1c85b906f5f17d2" title="Convenience function to write a 8-bits unisgned argData into the register argAddress...">PCA9685::write_8u</a>(<span class="keyword">const</span> uint8_t &amp;argAddress, <span class="keyword">const</span> uint8_t &amp;argData)
<a name="l00966"></a>00966 {
<a name="l00967"></a>00967     Wire.beginTransmission( this-&gt;<a class="code" href="classPCA9685.html#a714b5a937848140434c8d3806e352eb1" title="The PCA9685&amp;#39;s I2C slave address, as set by the constructor.">m_address</a> );
<a name="l00968"></a>00968     Wire.write( argAddress );
<a name="l00969"></a>00969     Wire.write( argData );
<a name="l00970"></a>00970     Wire.endTransmission();
<a name="l00971"></a>00971 }
<a name="l00972"></a>00972 
<a name="l00973"></a>00973 <span class="comment">/* ######################################################################### */</span>
<a name="l00974"></a>00974 <span class="comment">/* ######################################################################### */</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Feb 27 23:04:22 2014 for ArduParts by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
